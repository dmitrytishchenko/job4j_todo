<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The application TODO list</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <style type="text/css">
        body {
            background-color: aquamarine;
            margin-left: 5%;
            margin-right: 5%;
            padding: 20px 20px 20px 20px;
        }
    </style>
    <script>
        $(document).ready(function () {
            getCustomer();
            getCars();
        })
    </script>
    <script>
        function getCustomer() {
            $.ajax({
                type: 'GET',
                url: '././customer'
            }).done(function (data) {
                var user = JSON.parse(data);
                $('#customer').after(" " + user.role);
            })
        }
    </script>
    <script>
        function getCars() {
            $.ajax({
                type: 'GET',
                url: '././cars'
            }).done(function (data) {
                var mas = JSON.parse(data);
                var result = "";
                for (var i = 0; i < mas.length; i++) {
                    result += "<tr>" +
                        "<td>" + mas[i].id + "</td>" +
                        "<td>" + mas[i].brand + "</td>" +
                        "<td>" + mas[i].model + "</td>" +
                        "<td>" + mas[i].year + "</td>" +
                        "<td>" + mas[i].engine.type + "</td>" +
                        "<td><img src=\"\download?name=" + mas[i].photoName + "\" width='50' height='50'/></td>" +
                        "<td>" + mas[i].actual + "</td>" +
                        "<td>" + mas[i].user.role + "</td>" +
                        "<td><a class=\"nav-link\" href=\"././edit?id=" + mas[i].id + "\" title=\"Edit ad for the sale of cars\">Edit ad</a></td>" +
                        "</tr>";
                }
                document.getElementById("bodyTable").innerHTML = result;

            })
        }
    </script>
</head>
<body>

<a class="nav-link" href="././newcar.html" title="Add a new car">Create new car</a>

<div class="container">
    <h2>CARS</h2>
    <table class="table table-condensed">
        <thead>
        <tr>
            <th>ID</th>
            <th>Brand</th>
            <th>Model</th>
            <th>Year</th>
            <th>Engine</th>
            <th>Photo</th>
            <th>isActual</th>
            <th>Owner</th>
            <th>Change</th>
        </tr>
        </thead>
        <tbody id="bodyTable">
        </tbody>
    </table>
</div>
<a href="././output.html">Output</a>
<div class="form-group">
    <label id="customer">The customer is:</label>
</div>
</body>
</html>